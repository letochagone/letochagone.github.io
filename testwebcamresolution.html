<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="author" content="">
  <meta name="description" content="">


<style type="text/css">
        html, body {
            height: 100%;
            margin: 0;
        }

        video {
            xmin-height: 100%; 
            xwidth:100vw;
        }
    </style>


</head>

<body>



  <video></video>
<p>resolution of your webcam by defaut :</p>
<div id="thediv"></div>





<script type="text/javascript">

window.onload=function() {
    var constraints = {
        audio: false,
                      
        video: {
          width:640,
          height:480,
         // height:{max:200},
                  facingMode:  "user" 

        }
      };
    

    navigator.mediaDevices.getUserMedia(constraints).then(function(mediaStream){
        var video = document.querySelector('video');
        video.srcObject = mediaStream;
        video.play();
     // setTimeout(_=>{console.log("a ="+video.videoWidth);},1000);
      
      getVideoDimensionsOf(mediaStream,video)
   .then(({width, height}) => {
        document.getElementById("thediv").innerHTML = 
          " B width: " + width +" , height: " + height;


    });
      
      
    }).catch(function(err){
        console.log("yikes, and err!" + err.message);
    });

}

function getVideoDimensionsOf(url,vid){
  return new Promise(function(resolve){
    //let video = document.createElement('video');
    vid.addEventListener( "loadedmetadata", function () {
      let height = this.videoHeight;
      let width = this.videoWidth;
      resolve({
        height : height,
        width : width
      });
    }, false );

   // video.srcObject = url;
  });
}



</script>


</body>

</html>